<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>
<h2>아이디찾기</h2>
<form th:action="@{/member/findId}" method="post" id="myPageForm">
    <div th:if="${error}" class="error-message">
        <p th:text="${error}"></p>
    </div>
<div>
    <label for="email" class="form-label">본인확인 이메일 인증</label>
    <input type="hidden" name="verificationCode" th:value="${verificationCode}" >
    <input type="text" name="email" th:value="${email}" class="form-control">
    <input type="submit" value="인증하기">
</div>
    <!-- 인증번호 입력 폼 (처음에는 숨김) -->
    <div id="verificationCodeForm" th:if="${session.verificationCode != null and session.verificationCode != ''}">
        <label for="verificationCodeInput" class="form-label">인증번호 입력</label>
        <input type="hidden" name="verificationCode" th:value="${verificationCode}">
        <input type="hidden" name="email" th:value="${email}">
        <input type="text" name="enteredVerificationCode" th:value="${enteredVerificationCode}" class="form-control">
        <input type="submit" value="확인" onclick="submitForm('myPageForm', '/member/emailsendVerificationCode')">
    </div>
    <div th:if="${enteredVerificationCode != null and enteredVerificationCode == session.verificationCode}">
        <label for="findId">찾은아이디</label>
        <input type="hidden" name="verificationCode" th:value="${verificationCode}">
        <input type="hidden" name="loginId" th:value="${member.loginId}">
    </div>
</form>
<script>
    function submitForm(formId, action) {
        var form = document.getElementById(formId);
        form.action = action; // 액션을 동적으로 설정
        form.submit(); // 폼 제출
    }
</script>
</body>
</html>